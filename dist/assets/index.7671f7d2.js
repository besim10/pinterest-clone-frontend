import{j as P,u as N,L as f,a as T,r as p,N as C,R as w,b as v,c as $,d as j,B as L,e as O}from"./vendor.90f6dd50.js";const E=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))l(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function o(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerpolicy&&(a.referrerPolicy=s.referrerpolicy),s.crossorigin==="use-credentials"?a.credentials="include":s.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function l(s){if(s.ep)return;s.ep=!0;const a=o(s);fetch(s.href,a)}};E();var b="/assets/Pinterest-logo.6efadbc4.svg",I="/assets/Search.93ec79e5.svg";const e=P.exports.jsx,r=P.exports.jsxs;function F({setModal:n,currentUser:t,setCurrentUser:o,setSearch:l}){const s=N();return r("div",{className:"header",children:[e(f,{to:"/pins",children:e("div",{className:"logo",children:e("img",{src:b,alt:""})})}),e("div",{className:"home",children:e(f,{to:"/pins",children:e("span",{children:"Home"})})}),r("div",{className:"search desktop",children:[e("span",{children:e("img",{className:"search-icon",src:I,alt:""})}),e("input",{onChange:a=>{l(a.target.value)},type:"search",placeholder:"Search"})]}),t===null?r("div",{className:"header-buttons",children:[e("button",{onClick:()=>{n("log-in")},className:"button log-in",children:"Log in"}),e("button",{onClick:()=>{n("sign-up")},className:" button sign up",children:"Sign Up"})]}):r("div",{className:"profile-button__container",children:[e("button",{onClick:()=>{o(null),s("/")},className:"button log-out",children:"Log out"}),e(f,{to:"/profile/created",children:e("button",{className:"button profile",children:t!==null?e("img",{src:`https://i.pravatar.cc/150?img=${t.id}`,alt:""}):null})})]})]})}function A({pins:n,search:t}){return e("div",{className:"pins-container",children:(()=>{let l=n;return l=l.filter(s=>s.title.toUpperCase().includes(t.toUpperCase())),l})().map((l,s)=>e(f,{to:`/pins/${l.id}`,children:r("div",{className:"pin",children:[e("img",{src:l.imgSrc}),e("div",{className:"overlay"}),e("span",{children:l.title})]})},s))})}const h="https://playful-verbena-termite.glitch.me";function q({pins:n,setPins:t,currentUser:o,setCurrentUser:l,setModal:s}){const a=T(),[i,d]=p.exports.useState(null),c=N();p.exports.useEffect(()=>{fetch(`${h}/pins/${a.id}?_expand=user`).then(u=>u.json()).then(u=>d(u))},[]);function m(){return o.saved.find(y=>y.pinId===i.id)}const g=()=>{if(o!==null&&i!==null)return o.id===i.userId},S=()=>{fetch(`${h}/pins/${i.id}`,{method:"DELETE"}).then(()=>{let u=[...n];u=u.filter(y=>y.id!==i.id),t(u),c("/profile/created")})},_=()=>{if(o===null){s("cannot-save"),setTimeout(()=>{s("log-in")},1200);return}else if(m()){s("cannot-save-twice"),setTimeout(()=>{s("")},1500);return}i!==null&&fetch(`${h}/users/${o.id}`,{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({saved:[...o.saved,{pinId:i.id}]})}).then(u=>u.json()).then(()=>{let u=JSON.parse(JSON.stringify(o));u.saved=[...u.saved,{pinId:i.id}],l(u),setTimeout(()=>{c("/profile")},500)})};return i===null?e("h1",{children:"Loading..."}):e("div",{className:"pin-detail-wrapper",children:r("div",{className:"pin-detail-container",children:[e("div",{className:"pin-detail__image",children:e("img",{src:i.imgSrc,alt:i.name})}),r("div",{className:"pin-detail__descriptions",children:[r("div",{className:"pin-detail__descriptions__buttons",children:[g()?e("button",{onClick:S,className:"button delete",children:"Delete"}):null,e("button",{onClick:_,className:"button save",children:"SAVE"})]}),r("h4",{children:[e("span",{className:"pin-detail__description__uploaded",children:"Uploaded by:"})," ",i.user.name," ",i.user.surname]}),e("h3",{children:i.title}),e("p",{children:i.content})]})]})})}function R({setModal:n}){return e("div",{onClick:()=>{n("")},className:"modal-wrapper cannot-save-message",children:e("div",{onClick:t=>{t.stopPropagation()},className:"modal cannot-save-message",children:e("h1",{children:"First, log in please!\u{1F62C}"})})})}function D({setModal:n}){return e("div",{onClick:()=>{n("")},className:"modal-wrapper cannot-save-message",children:e("div",{onClick:t=>{t.stopPropagation()},className:"modal cannot-save-message",children:e("h2",{children:"Common you can't save it twice..\u{1F937}\u200D\u2642\uFE0F"})})})}var x="/assets/Create.9adcd2cd.svg";function B({setModal:n}){return e("div",{onClick:()=>{n("")},className:"modal-wrapper create",children:e("div",{onClick:t=>{t.stopPropagation()},className:"modal create",children:e(f,{to:"/pin-builder",children:r("button",{onClick:()=>{n("")},className:"modal-create__button",children:[e("img",{src:x,alt:""}),e("span",{children:"Create a pin"})]})})})})}var k="/assets/Close.7e737d4b.svg";function J({setModal:n,setCurrentUser:t}){function o(s,a){fetch(`${h}/users`).then(i=>i.json()).then(i=>{let c=i.find(m=>m.email===s&&m.password===a);c?c.password===a&&(t(c),n("welcome"),setTimeout(function(){n("")},1500)):(n("user-not-exists"),setTimeout(function(){n("log-in")},1500))})}return e("div",{className:"modal-wrapper",children:r("div",{className:"modal",children:[e("button",{onClick:()=>{n("")},className:"close-modal",children:e("img",{src:k,alt:""})}),e("span",{className:"logo",children:e("img",{src:b,alt:"Pinterest Logo"})}),e("h1",{children:"Welcome to Pinterest"}),r("div",{className:"modal-details",children:[r("form",{onSubmit:s=>{s.preventDefault();const a=s.target.email.value,i=s.target.password.value;o(a,i)},children:[e("input",{type:"email",name:"email",placeholder:"Email",required:!0}),e("input",{type:"password",name:"password",placeholder:"Password",required:!0}),e("button",{className:"button submit",type:"submit",children:"Log in"})]}),r("p",{children:["By continuing, you agree to Pinterest's"," ",e("strong",{children:"Terms of Service"})," and acknowledge you've read our"," ",e("strong",{children:"Privacy Policy"})]}),e("span",{onClick:()=>{n("sign-up")},className:"modal-details__check",children:"Not on Pinterest yet? Sign up"})]})]})})}function W({setModal:n,setCurrentUser:t}){function o(a){fetch(`${h}/users`).then(i=>i.json()).then(i=>{let c=i.find(m=>m.email===a.email);c?c.email===a.email&&(n("user-already-exists"),setTimeout(function(){n("sign-up")},1500)):l(a)})}function l(a){fetch(`${h}/users`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)}).then(i=>i.json()).then(i=>{t(i),n("welcome"),setTimeout(function(){n("")},1500)})}return e("div",{className:"modal-wrapper",children:r("div",{className:"modal",children:[e("button",{onClick:()=>{n("")},className:"close-modal",children:e("img",{src:k,alt:""})}),e("span",{className:"logo",children:e("img",{src:b,alt:"Pinterest Logo"})}),e("h1",{children:"Welcome to Pinterest"}),e("span",{children:"Find new ideas to try"}),r("div",{className:"modal-details",children:[r("form",{onSubmit:a=>{a.preventDefault();const i=a.target.email.value,d=a.target.password.value,c=a.target.name.value,m=a.target.surname.value;o({name:c,surname:m,email:i,password:d,saved:[]})},children:[e("input",{type:"email",name:"email",placeholder:"Email",required:!0}),e("input",{type:"password",name:"password",placeholder:"Password",required:!0}),e("input",{type:"text",name:"name",placeholder:"Name",required:!0}),e("input",{type:"text",name:"surname",placeholder:"Surname",required:!0}),e("button",{className:"button submit",type:"submit",children:"Continue"})]}),r("p",{children:["By continuing, you agree to Pinterest's"," ",e("strong",{children:"Terms of Service"})," and acknowledge you've read our"," ",e("strong",{children:"Privacy Policy"})]}),e("span",{onClick:()=>{n("log-in")},className:"modal-details__check",children:"Already a member? Log in"})]})]})})}function H({setModal:n}){return e("div",{onClick:()=>{n("")},className:"modal-wrapper user-already-exists",children:r("div",{onClick:t=>{t.stopPropagation()},className:"modal user-already-exists",children:[e("h1",{children:"User already exists..."}),e("span",{children:"Please try again!"})]})})}function K({setModal:n}){return e("div",{onClick:()=>{n("")},className:"modal-wrapper user-not-exists",children:r("div",{onClick:t=>{t.stopPropagation()},className:"modal  user-not-exists",children:[e("h1",{children:"User not exists!"}),e("span",{children:"Please try again!"})]})})}function U({setModal:n,currentUser:t}){return e("div",{onClick:()=>{n("")},className:"modal-wrapper welcome",children:e("div",{onClick:o=>{o.stopPropagation()},className:"modal welcome",children:r("h1",{children:["Welcome, ",t.name,"! \u{1F44C}"]})})})}function V({modal:n,setModal:t,currentUser:o,setCurrentUser:l}){switch(n){case"log-in":return e(J,{setModal:t,setCurrentUser:l});case"sign-up":return e(W,{setModal:t,setCurrentUser:l});case"create":return e(B,{setModal:t});case"user-not-exists":return e(K,{setModal:t});case"user-already-exists":return e(H,{setModal:t});case"welcome":return e(U,{currentUser:o,setModal:t});case"cannot-save":return e(R,{setModal:t});case"cannot-save-twice":return e(D,{setModal:t});default:return null}}function Y({createdPins:n}){return e("ul",{className:"created-list",children:n.map(t=>e(f,{to:`/pins/${t.id}`,children:r("li",{className:"created-list__item",children:[e("img",{src:t.imgSrc,alt:""}),e("div",{className:"overlay"})]})},t.id))})}function z({savedPins:n}){return e("ul",{className:"saved-list",children:n.length!==0?n.map(t=>e(f,{to:`/pins/${t.id}`,children:r("li",{className:"saved-list__item",children:[e("img",{src:t.imgSrc,alt:""}),e("div",{className:"overlay"})]})},t.id)):e("h2",{children:"Not any saved pins yet!"})})}function G({currentUser:n}){const[t,o]=p.exports.useState([]),[l,s]=p.exports.useState([]),a=N();if(p.exports.useEffect(()=>{n===null&&a("/")},[n,a]),p.exports.useEffect(()=>{fetch(`${h}/pins`).then(d=>d.json()).then(d=>{o(d)})},[]),n===null)return e("h1",{children:"User not signed in..."});const i=n.saved.map(d=>t.find(c=>d.pinId===c.id));return p.exports.useEffect(()=>{fetch(`${h}/pins`).then(d=>d.json()).then(d=>{let c=d;c=c.filter(m=>m.userId===n.id),s(c)})},[]),r("div",{children:[r("div",{className:"profile-main",children:[e("img",{className:"profile-main__photo",src:`https://i.pravatar.cc/150?img=${n.id}`}),e("h1",{className:"profile-main__title",children:`${n.name} ${n.surname}`}),e("span",{children:`@${n.name}${n.surname}`}),r("div",{className:"action-bar",children:[e(C,{to:"/profile/created",children:e("button",{children:"Created"})}),e(C,{to:"/profile/saved",children:e("button",{children:"Saved"})})]})]}),r(w,{children:[e(v,{path:"/created",element:e(Y,{createdPins:l})}),e(v,{path:"/saved",element:e(z,{savedPins:i})})]})]})}function Q({pins:n,setPins:t,currentUser:o}){const l=N();function s(i){fetch(`${h}/pins`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(i)}).then(d=>d.json()).then(d=>{let c=JSON.parse(JSON.stringify(n));t([d,...c]),setTimeout(function(){l("/pins")},100)})}return e("div",{className:"pin-builder-wrapper",children:e("div",{className:"pin-builder-content",children:r("form",{onSubmit:i=>{i.preventDefault();const d=i.target.url.value,c=i.target.title.value,m=o.id,g=i.target.content.value;s({imgSrc:d,title:c,userId:m,content:g})},children:[e("button",{className:"button post",type:"submit",children:"POST"}),e("input",{type:"text",name:"url",placeholder:"Your image URL:",required:!0}),e("input",{type:"text",name:"title",placeholder:"Add your title",required:!0}),e("textarea",{name:"content",cols:40,rows:10,placeholder:"Tell everyone what your pin is about \u{1F600}"})]})})})}function X(){const[n,t]=p.exports.useState([]),[o,l]=p.exports.useState(""),[s,a]=p.exports.useState(null),[i,d]=p.exports.useState("");return p.exports.useEffect(()=>{fetch(`${h}/pins`).then(c=>c.json()).then(c=>{t(c.reverse())})},[]),r("div",{className:"App",children:[e(F,{setModal:l,currentUser:s,setCurrentUser:a,setSearch:d}),r("main",{children:[s!==null?e("button",{onClick:()=>{l("create")},className:"create-pin__button-on-page",children:e("img",{src:x,alt:""})}):null,r(w,{children:[e(v,{index:!0,element:e($,{to:"/pins"})}),e(v,{path:"/pins",element:e(A,{pins:n,search:i})}),e(v,{path:"/pins/:id",element:e(q,{currentUser:s,setCurrentUser:a,setModal:l,pins:n,setPins:t})}),e(v,{path:"/pin-builder",element:e(Q,{pins:n,setPins:t,currentUser:s})}),e(v,{path:"/profile/*",element:e(G,{currentUser:s})})]}),e(V,{modal:o,setModal:l,currentUser:s,setCurrentUser:a})]})]})}j.render(e(L,{children:e(O.StrictMode,{children:e(X,{})})}),document.getElementById("root"));
